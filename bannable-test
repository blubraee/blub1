
local Player = game.Players.LocalPlayer
local Mouse = Player:GetMouse()
local Camera = workspace.CurrentCamera
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

-- Variables
local FlyEnabled = false
local NoclipEnabled = false
local ESPEnabled = false
local AimbotEnabled = false
local WalkSpeedValue = 16

-- Fly
local function Fly()
    if not Player.Character or not Player.Character:FindFirstChild("HumanoidRootPart") then return end
    local root = Player.Character.HumanoidRootPart
    local bv = Instance.new("BodyVelocity")
    bv.Velocity = Vector3.new(0,0,0)
    bv.MaxForce = Vector3.new(9e9,9e9,9e9)
    bv.Parent = root
    repeat
        if not FlyEnabled then bv:Destroy() break end
        local camLook = Camera.CFrame.LookVector * (UIS:IsKeyDown(Enum.KeyCode.W) and 1 or 0 + UIS:IsKeyDown(Enum.KeyCode.S) and -1 or 0)
        local side = Camera.CFrame.RightVector * (UIS:IsKeyDown(Enum.KeyCode.D) and 1 or 0 + UIS:IsKeyDown(Enum.KeyCode.A) and -1 or 0)
        root.Velocity = (camLook + side) * 200
        task.wait()
    until not FlyEnabled
end

-- Very simple ESP (highlight + nametag)
local function CreateESP(plr)
    if plr.Character and plr.Character:FindFirstChild("Head") then
        local highlight = Instance.new("Highlight")
        highlight.FillColor = Color3.fromRGB(255,0,0)
        highlight.OutlineColor = Color3.fromRGB(255,255,0)
        highlight.Parent = plr.Character
        
        local bill = Instance.new("BillboardGui", plr.Character.Head)
        bill.AlwaysOnTop = true
        bill.Size = UDim2.new(0,100,0,50)
        local text = Instance.new("TextLabel", bill)
        text.BackgroundTransparency = 1
        text.Size = UDim2.new(1,0,1,0)
        text.Text = plr.Name
        text.TextColor3 = Color3.new(1,0,0)
    end
end

-- Main Tab
local Main = Window:NewTab("Main Cheats")
local MainSection = Main:NewSection("Movement & Visuals")

MainSection:NewToggle("Fly (F key)", "Fly with WASD", function(state)
    FlyEnabled = state
    if state then Fly() end
end)

MainSection:NewToggle("Noclip", "Walk through walls", function(state)
    NoclipEnabled = state
    if Player.Character then
        for _,v in pairs(Player.Character:GetDescendants()) do
            if v:IsA("BasePart") then
                v.CanCollide = not state
            end
        end
    end
end)

MainSection:NewSlider("WalkSpeed", "Change speed", 500, 16, function(v)
    WalkSpeedValue = v
    if Player.Character and Player.Character:FindFirstChild("Humanoid") then
        Player.Character.Humanoid.WalkSpeed = v
    end
end)

MainSection:NewToggle("ESP", "See players through walls", function(state)
    ESPEnabled = state
    if state then
        for _, plr in pairs(game.Players:GetPlayers()) do
            if plr ~= Player then CreateESP(plr) end
        end
    else
        -- cleanup code would go here
    end
end)

-- Very basic aimbot (just snaps to nearest head)
Mouse.KeyDown:Connect(function(key)
    if key:lower() == "c" and AimbotEnabled then
        local closest, dist = nil, math.huge
        for _, plr in pairs(game.Players:GetPlayers()) do
            if plr ~= Player and plr.Character and plr.Character:FindFirstChild("Head") then
                local screenPos, onScreen = Camera:WorldToViewportPoint(plr.Character.Head.Position)
                if onScreen then
                    local mag = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(screenPos.X, screenPos.Y)).Magnitude
                    if mag < dist then
                        dist = mag
                        closest = plr.Character.Head
                    end
                end
            end
        end
        if closest then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, closest.Position)
        end
    end
end)

-- Hotkeys
Mouse.KeyDown:Connect(function(k)
    if k:lower() == "f" then FlyEnabled = not FlyEnabled Fly() end
end)

print("Hypothetical menu loaded - this is for learning only!")
